<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="User">

	<select id="readUser" resultType="com.walab.hgu.DTO.UserDTO"
		parameterType="hashmap">
		SELECT u.id, name, email, u.admin, phone, clubName FROM (hguclub.user as u
		LEFT JOIN hguclub.club as c ON c.userId=u.id)
		ORDER BY u.regdate DESC
		LIMIT #{displayPost}, #{postNum}
	</select>
	
	<select id="readAllUsers" resultType="com.walab.hgu.DTO.UserDTO"
		parameterType="hashmap">
		SELECT * FROM hguclub.user
	</select>
	
	<select id="countInfo" resultType="int">
		SELECT COUNT(*) as listCnt
		FROM user
	</select>
	
	<select id="reaadminByUserID" resultType="int" parameterType="hashmap">
		SELECT admin FROM hguclub.user WHERE id=${userID}
	</select>
	
	<select id="readUserIDByEmail" resultType="int" parameterType="hashmap">
		SELECT id FROM user WHERE email=#{email}
	</select>
	<update id="updateAuthority" parameterType="hashmap">
		UPDATE user
		SET admin = #{admin}
		WHERE id = #{id}
	</update>
</mapper>